echo "ToDos >> README4APP"
if yes?("Do you want Authorization?")
  #git clone git://github.com/technoweenie/restful-authentication.git restful_authentication
  plugin "restful_authentication", :git => "git://github.com/technoweenie/restful-authentication.git"
  if yes?("Activationmails")
    #run "./script/generate authenticated user sessions --include-activation"
    generate (:authenticated, "user sessions --include-activation")
    route "map.activate '/activate/:activation_code', :controller => 'users', :action => 'activate', :activation_code => nil"
  else  
    #run "./script/generate authenticated user sessions"
    generate (:authenticated, "user sessions")
  end
  route "map.signup  '/signup', :controller => 'users',   :action => 'new'"
  route "map.login  '/login',  :controller => 'session', :action => 'new'"
  route "map.logout '/logout', :controller => 'session', :action => 'destroy'"
  run "echo 'Authentication enabled (user, sessions)'"
  run "echo '.include AuthenticatedSystem. to ApplicationController' > README4APP"
end

if yes?("Do you want Roles")
  plugin "declarative_authorization", :git => "git://github.com/stffn/declarative_authorization.git"
  
  echo "''"
  echo "'using_access_control'> README4APP"
  echo "'include Authentication'> README4APP"
  echo "'include Authentication::ByPassword'> README4APP"
  echo "'comm.include Authentication::ByCookieToken'> README4APP"
  echo "'in Users Model below class User'> README4APP"
  echo "'-'> README4APP"
  echo "'add :roles to attr_accessible in User Model'> README4APP"
  echo "'-'> README4APP"
  echo "'add serialize :roles, Array'> README4APP"
  echo "'def role_symbols'> README4APP"
  echo "'  r = (roles || []).map {|r| r.to_sym}'> README4APP"
  echo "'end'> README4APP"
  echo "'has_many :talk_attendees'> README4APP"
  echo "'has_many :conference_attendees'> README4APP"
  

end


run "echo 'TODO add readme content' > README"
run "cp config/database.yml config/example_database.yml"
